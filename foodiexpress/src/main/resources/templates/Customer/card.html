<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>Welcome Customer</title>
    <link rel="icon" type="image/png" href="https://img.icons8.com/external-flaticons-lineal-color-flat-icons/64/external-welcome-rage-room-flaticons-lineal-color-flat-icons.png">
    
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css}" rel="stylesheet">
    <script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js}"></script>
    <link th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css}" rel="stylesheet">
    <script th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js}"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif; /* Assuming Poppins is preferred */
            color: #333;
            background-color: #f8f9fa; /* Light grey background for consistency */
        }
        .section-heading {
            text-align: center;
            font-size: 2.2rem;
            font-weight: 700;
            color: #4CAF50; /* A vibrant green color */
            margin-top: 40px;
            margin-bottom: 30px;
            position: relative;
            padding-bottom: 10px;
        }
        .section-heading::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: #FFC107; /* Gold underline */
            border-radius: 2px;
        }

        /* Card Design for Order Items */
        .order-card .card {
            border: 1px solid #e0e0e0; /* Lighter border */
            border-radius: 15px; /* Rounded corners */
            box-shadow: 0 4px 12px rgba(0,0,0,0.08); /* Prominent shadow */
            transition: all 0.3s ease;
            margin-top: 20px;
            overflow: hidden; /* Ensure content stays within border-radius */
            background-color: #fff; /* White background for card */
        }
        .order-card .card:hover {
            transform: translateY(-5px); /* Lift card on hover */
            box-shadow: 0 6px 16px rgba(0,0,0,0.15); /* More pronounced shadow on hover */
        }
        .order-card .card-body {
            padding: 20px; /* More padding inside card body */
        }
        .order-card .food-details {
            display: flex;
            align-items: center; /* Vertically align items */
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eee; /* Subtle separator */
        }
        .order-card .food-details img {
            width: 90px; /* Larger image for clarity */
            height: 90px;
            object-fit: cover;
            border-radius: 10px; /* Slightly rounded image corners */
            margin-right: 20px; /* Space between image and text */
        }
        .order-card .food-info {
            flex-grow: 1;
            text-align: right;
        }
        .order-card .food-info h4 {
            margin-bottom: 5px; /* Space between food name and restaurant */
            font-size: 1.6rem; /* Larger food name */
            font-weight: 600;
            color: #333;
        }
        .order-card .food-info .restaurant-name {
            font-size: 1.1rem; /* Clearer restaurant name */
            color: #666;
            display: flex;
            align-items: center;
            justify-content: flex-end; /* Align to the right */
        }
        .order-card .food-info .restaurant-name img {
            width: 20px; /* Smaller icon */
            height: 20px;
            margin-right: 5px;
        }

        .order-card .price-quantity-section {
            display: flex;
            justify-content: space-between; /* Space out quantity and total */
            align-items: center;
            border: 1px solid #ccc; /* Slightly darker border for this section */
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 20px; /* Space below this section */
            background-color: #f0f8ff; /* Light blue background for emphasis */
        }
        .order-card .price-quantity-section h4 {
            margin: 0;
            font-size: 1.2rem;
            color: #555;
            font-weight: 500;
        }
        .order-card .price-quantity-section h4 strong {
            color: #dc3545; /* Red for total price */
            font-size: 1.4rem; /* Larger font for total price */
        }

        .order-card .action-buttons {
            display: flex;
            justify-content: center; /* Center buttons */
            gap: 15px; /* Space between buttons */
            margin-top: 10px;
        }
        .order-card .btn {
            width: 45%; /* Make buttons take more width */
            padding: 12px 0; /* More vertical padding */
            border-radius: 25px; /* Fully rounded buttons */
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .order-card .btn-feedback {
            background-color: #28a745; /* Green for feedback */
            border-color: #28a745;
            color: white;
        }
        .order-card .btn-feedback:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }
        .order-card .btn-track-order {
            background-color: #007bff; /* Blue for track order */
            border-color: #007bff;
            color: white;
        }
        .order-card .btn-track-order:hover {
            background-color: #0056b3;
            border-color: #004085;
        }
        .order-card .btn a {
            text-decoration: none;
            color: inherit; /* Inherit color from button */
        }

        /* Feedback Modal Styling */
        .modal-content {
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .modal-header {
            background-color: #4CAF50; /* Green header */
            color: white;
            border-bottom: none;
            border-radius: 15px 15px 0 0;
            padding: 15px 20px;
        }
        .modal-header .close {
            color: white;
            opacity: 0.8;
            font-size: 2rem;
            line-height: 1;
            padding: 0;
            margin: -0.5rem -0.5rem -0.5rem auto; /* Adjust close button position */
        }
        .modal-title {
            font-weight: 600;
        }
        .modal-body {
            padding: 25px;
            background-color: #f9f9f9;
        }
        .modal-body .form-group label b {
            color: #333;
            font-size: 1.1rem;
            margin-bottom: 8px;
            display: block;
        }
        .modal-body .form-check {
            margin-right: 15px; /* Space out radio buttons */
        }
        .modal-body .form-check-label {
            color: #555;
        }
        .modal-body textarea {
            border-radius: 8px;
            border: 1px solid #ccc;
            padding: 10px;
            resize: vertical;
            min-height: 80px;
        }
        .modal-body .btn-primary {
            background-color: #28a745; /* Green send button */
            border-color: #28a745;
            border-radius: 25px;
            padding: 10px 30px;
            font-weight: 600;
            margin-top: 20px;
        }
        .modal-body .btn-primary:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }
    </style>
</head>

<body style="background-color: #E6E6FA;">
    <br>
    <h3 class="section-heading">Cart</h3>
    <br>

    <div class="container">
        <div class="row justify-content-center">
            <div th:each="c : ${order}" class="col-lg-7 mb-4 order-card"> <div class="card cl4">
                    <div class="card-body">
                        <div class="food-details">
                            <img th:src="${c.fImg}" alt="Food Image">
                            <div class="food-info">
                                <h4 th:text="${c.name}"></h4>
                                <h4 class="restaurant-name">
                                    <img width="20" height="20" src="https://img.icons8.com/color/48/restaurant-.png" alt="restaurant"/> <span th:text="${c.rName}"></span>
                                </h4>
                            </div>
                        </div>

                        <div class="price-quantity-section">
                            <div>
                                <h4>Quantity</h4>
                                <h4>Total Rs</h4>
                            </div>
                            <div>
                                <h4 th:text="${c.quantity}"></h4>
                                <h4><strong th:text="${c.price}"></strong></h4>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button type="button" class="btn btn-feedback" data-toggle="modal" data-target="#myModal">Send Feedback</button>
                            <button type="button" class="btn btn-track-order">
                                <a href="#" style="text-decoration: none; color:white;">Track Order</a>
                            </button>  
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Feedback</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form th:action="@{/feedback}" th:object="${fb}" th:method="POST">
                        <div class="form-group">
                            <label for="q1"><b>1) How was the overall quality of the food?</b></label>
                            <div style="display:flex; gap:10px; flex-wrap: wrap;"> <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{foodQuality}" th:value="1" id="foodQuality1">
                                    <label class="form-check-label" for="foodQuality1">Worst</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{foodQuality}" th:value="2" id="foodQuality2">
                                    <label class="form-check-label" for="foodQuality2">Bad</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{foodQuality}" th:value="3" id="foodQuality3">
                                    <label class="form-check-label" for="foodQuality3">Average</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{foodQuality}" th:value="4" id="foodQuality4">
                                    <label class="form-check-label" for="foodQuality4">Good</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{foodQuality}" th:value="5" id="foodQuality5">
                                    <label class="form-check-label" for="foodQuality5">Excellent</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group mt-3"> <label for="q2"><b>2) How was the overall delivery experience?</b></label>
                            <div style="display:flex; gap:10px; flex-wrap: wrap;"> <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{deliveryQuality}" th:value="1" id="deliveryQuality1">
                                    <label class="form-check-label" for="deliveryQuality1">Worst</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{deliveryQuality}" th:value="2" id="deliveryQuality2">
                                    <label class="form-check-label" for="deliveryQuality2">Bad</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{deliveryQuality}" th:value="3" id="deliveryQuality3">
                                    <label class="form-check-label" for="deliveryQuality3">Average</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{deliveryQuality}" th:value="4" id="deliveryQuality4">
                                    <label class="form-check-label" for="deliveryQuality4">Good</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" th:field="*{deliveryQuality}" th:value="5" id="deliveryQuality5">
                                    <label class="form-check-label" for="deliveryQuality5">Excellent</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group mt-3"> <label for="q3"><b>3) Did you encounter any problems during the ordering process?</b></label>
                            <textarea class="form-control" th:field="*{appExp}" rows="4" placeholder="Type your comments here..."></textarea>
                        </div>
                        <input type="hidden" th:field="*{cEmail}">
    
                        <center>
                            <button type="submit" class="btn btn-primary">Send</button>
                        </center>
                    </form>
                </div>
            </div>
        </div>
    </div>

</body>
</html>